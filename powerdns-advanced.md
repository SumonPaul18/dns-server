‡¶Ö‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£! üéØ  
‡¶Ü‡¶™‡¶®‡¶ø ‡¶è‡¶ñ‡¶® **‡¶™‡ßç‡¶∞‡¶´‡ßá‡¶∂‡¶®‡¶æ‡¶≤, ‡¶™‡ßç‡¶∞‡¶°‡¶æ‡¶ï‡¶∂‡¶®-‡¶∞‡ßá‡¶°‡¶ø, ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶∂‡¶®-‡¶´‡ßç‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶≤‡¶ø PowerDNS ‡¶°‡¶ï‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™** ‡¶ö‡¶æ‡¶ö‡ßç‡¶õ‡ßá‡¶® ‚Äî ‡¶Ø‡ßá‡¶ñ‡¶æ‡¶®‡ßá:

‚úÖ ‡¶∏‡¶¨ ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞‡ßá‡¶∂‡¶® `.env` ‡¶´‡¶æ‡¶á‡¶≤ ‡¶•‡ßá‡¶ï‡ßá ‡¶Ü‡¶∏‡¶¨‡ßá (Secrets, Ports, API Keys)  
‚úÖ ‡¶ú‡ßã‡¶®/‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶∏‡ßá ‡¶•‡¶æ‡¶ï‡¶¨‡ßá ‚Äî GUI/API ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá  
‚úÖ ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶∂‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø REST API + Health Check + CI/CD ‡¶∞‡ßá‡¶°‡¶ø  
‚úÖ ‡¶Æ‡¶®‡¶ø‡¶ü‡¶∞‡¶ø‡¶Ç (Prometheus) + ‡¶≤‡¶ó‡¶ø‡¶Ç (Filebeat) + ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™ (mysqldump) ‡¶á‡¶®‡ßç‡¶ü‡¶ø‡¶ó‡ßç‡¶∞‡ßá‡¶ü‡ßá‡¶°  
‚úÖ ‡¶∏‡¶ø‡¶ï‡¶ø‡¶â‡¶∞‡¶ø‡¶ü‡¶ø: API Key Rotation, Network Policy, Read-Only FS (optional)

---

# üöÄ PowerDNS ‚Äî ‡¶™‡ßç‡¶∞‡¶´‡ßá‡¶∂‡¶®‡¶æ‡¶≤ Docker Compose Setup (Production Grade)

> üìå **‡¶ü‡¶æ‡¶∞‡ßç‡¶ó‡ßá‡¶ü**:  
> - ‡¶è‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶ú/‡¶™‡ßç‡¶∞‡¶°‡¶æ‡¶ï‡¶∂‡¶® ‡¶°‡ßá‡¶™‡ßç‡¶≤‡¶Ø‡¶º‡¶Æ‡ßá‡¶®‡ßç‡¶ü  
> - Infrastructure as Code (IaC)  
> - GitOps / CI/CD ‡¶´‡ßç‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶≤‡¶ø  
> - Zero Downtime DNS Management  
> - Observability + Backup + Security

---

## üìÇ 1. ‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶æ‡¶ï‡¶ö‡¶æ‡¶∞

```
powerdns-prod/
‚îú‚îÄ‚îÄ .env                   # All secrets & variables
‚îú‚îÄ‚îÄ docker-compose.yml     # Main compose
‚îú‚îÄ‚îÄ pdns.conf.tpl          # Config template (optional)
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ backup.sh          # Auto backup script
‚îÇ   ‚îú‚îÄ‚îÄ healthcheck.sh     # Custom healthcheck
‚îÇ   ‚îî‚îÄ‚îÄ init_zones.sql     # Preload zones (optional)
‚îú‚îÄ‚îÄ monitoring/
‚îÇ   ‚îî‚îÄ‚îÄ prometheus.yml     # For metrics scraping
‚îú‚îÄ‚îÄ logs/
‚îî‚îÄ‚îÄ backups/
```

---

## üîê 2. `.env` ‚Äî ‡¶∏‡¶¨ ‡¶ï‡¶®‡¶´‡¶ø‡¶ó ‡¶è‡¶ï ‡¶ú‡¶æ‡¶Ø‡¶º‡¶ó‡¶æ‡¶Ø‡¶º (Secrets + Variables)

```env
# ============= MySQL =============
MYSQL_ROOT_PASSWORD=SuperSecretRootPass!2025
MYSQL_DATABASE=pdns_prod
MYSQL_USER=pdns_admin
MYSQL_PASSWORD=StrongPdnsDBPass!2025
MYSQL_PORT=3306

# ============= PowerDNS =============
PDNS_API_KEY=7x!K9#mQ2$pL8@nR5&vY4^wZ
PDNS_WEB_PORT=8081
PDNS_DNS_PORT=53
PDNS_STATS_URL=http://pdns:8081/
PDNS_VERSION=4.8.0

# ============= PowerDNS Admin =============
PDNS_ADMIN_PORT=8080
PDNS_ADMIN_SECRET_KEY=ChangeMeInProduction!2025
PDNS_ADMIN_SQL_URI=mysql://pdns_admin:StrongPdnsDBPass!2025@pdns-mysql:3306/pdns_prod

# ============= Monitoring =============
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000

# ============= Network =============
PDNS_NETWORK=powerdns-prod-net
PDNS_SUBNET=172.28.0.0/16

# ============= Volumes =============
MYSQL_VOLUME=pdns_mysql_prod_data
PDNS_LOGS=./logs
BACKUPS_DIR=./backups

# ============= Health Check =============
HEALTHCHECK_INTERVAL=30s
HEALTHCHECK_TIMEOUT=10s
HEALTHCHECK_RETRIES=3
```

> ‚úÖ ‡¶è‡¶ñ‡¶® ‡¶ï‡ßã‡¶®‡ßã ‡¶ï‡¶®‡¶´‡¶ø‡¶ó ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶≤‡ßá ‚Äî ‡¶∂‡ßÅ‡¶ß‡ßÅ `.env` ‡¶è‡¶°‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® ‚Üí `docker-compose up -d` ‚Äî ‡¶Ö‡¶ü‡ßã ‡¶Ü‡¶™‡¶°‡ßá‡¶ü!

---

## üê≥ 3. `docker-compose.yml` ‚Äî Production Grade

```yaml
version: '3.8'

services:
  # ==================== MySQL (Primary DB) ====================
  pdns-mysql:
    image: mysql:8.0
    container_name: pdns-mysql
    env_file: .env
    environment:
      MYSQL_ROOT_PASSWORD: ${MYSQL_ROOT_PASSWORD}
      MYSQL_DATABASE: ${MYSQL_DATABASE}
      MYSQL_USER: ${MYSQL_USER}
      MYSQL_PASSWORD: ${MYSQL_PASSWORD}
    volumes:
      - ${MYSQL_VOLUME}:/var/lib/mysql
      - ./backups:/backups
    networks:
      powerdns_net:
        ipv4_address: 172.28.0.10
    healthcheck:
      test: ["CMD", "mysqladmin", "ping", "-h", "localhost", "-u", "root", "-p${MYSQL_ROOT_PASSWORD}"]
      interval: ${HEALTHCHECK_INTERVAL}
      timeout: ${HEALTHCHECK_TIMEOUT}
      retries: ${HEALTHCHECK_RETRIES}
    restart: unless-stopped
    security_opt:
      - no-new-privileges:true
    read_only: true
    tmpfs:
      - /tmp

  # ==================== PowerDNS Authoritative Server ====================
  pdns:
    image: powerdns/pdns-auth-48
    container_name: pdns
    env_file: .env
    environment:
      PDNS_launch: gmysql
      PDNS_gmysql_host: pdns-mysql
      PDNS_gmysql_port: ${MYSQL_PORT}
      PDNS_gmysql_user: ${MYSQL_USER}
      PDNS_gmysql_password: ${MYSQL_PASSWORD}
      PDNS_gmysql_dbname: ${MYSQL_DATABASE}
      PDNS_api: "yes"
      PDNS_api_key: ${PDNS_API_KEY}
      PDNS_webserver: "yes"
      PDNS_webserver_address: 0.0.0.0
      PDNS_webserver_port: ${PDNS_WEB_PORT}
      PDNS_webserver_allow_from: 172.28.0.0/16,127.0.0.1
      PDNS_loglevel: 6
      PDNS_log_dns_queries: "yes"
      PDNS_distributor_threads: 4
      PDNS_receiver_threads: 4
    ports:
      - "${PDNS_DNS_PORT}:53/udp"
      - "${PDNS_DNS_PORT}:53/tcp"
      - "${PDNS_WEB_PORT}:8081/tcp"
    volumes:
      - ${PDNS_LOGS}/pdns:/var/log/pdns
    depends_on:
      pdns-mysql:
        condition: service_healthy
    networks:
      powerdns_net:
        ipv4_address: 172.28.0.11
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:${PDNS_WEB_PORT}/api/v1/servers"]
      interval: ${HEALTHCHECK_INTERVAL}
      timeout: ${HEALTHCHECK_TIMEOUT}
      retries: ${HEALTHCHECK_RETRIES}
    restart: unless-stopped
    security_opt:
      - no-new-privileges:true
    cap_drop:
      - ALL
    cap_add:
      - NET_BIND_SERVICE

  # ==================== PowerDNS Admin (Web GUI) ====================
  pdns-admin:
    image: ngoduykhanh/powerdns-admin:latest
    container_name: pdns-admin
    env_file: .env
    environment:
      PDNS_ADMIN_SQLA_DB_URI: ${PDNS_ADMIN_SQL_URI}
      PDNS_ADMIN_PDNS_STATS_URL: ${PDNS_STATS_URL}
      PDNS_ADMIN_PDNS_API_KEY: ${PDNS_API_KEY}
      PDNS_ADMIN_PDNS_VERSION: ${PDNS_VERSION}
      PDNS_ADMIN_SECRET_KEY: ${PDNS_ADMIN_SECRET_KEY}
      PDNS_ADMIN_ENABLE_BACKGROUND_SYNC: "true"
      PDNS_ADMIN_SESSION_TIMEOUT: 3600
    ports:
      - "${PDNS_ADMIN_PORT}:80"
    depends_on:
      - pdns
      - pdns-mysql
    networks:
      powerdns_net:
        ipv4_address: 172.28.0.12
    restart: unless-stopped
    security_opt:
      - no-new-privileges:true

  # ==================== Prometheus (Monitoring) ====================
  prometheus:
    image: prom/prometheus:latest
    container_name: prometheus
    ports:
      - "${PROMETHEUS_PORT}:9090"
    volumes:
      - ./monitoring/prometheus.yml:/etc/prometheus/prometheus.yml
    networks:
      powerdns_net:
        ipv4_address: 172.28.0.13
    restart: unless-stopped

  # ==================== Grafana (Dashboard) ====================
  grafana:
    image: grafana/grafana:latest
    container_name: grafana
    ports:
      - "${GRAFANA_PORT}:3000"
    environment:
      GF_SECURITY_ADMIN_PASSWORD: admin123
    networks:
      powerdns_net:
        ipv4_address: 172.28.0.14
    restart: unless-stopped

  # ==================== Backup Cron (Daily) ====================
  backup-cron:
    image: alpine:latest
    container_name: backup-cron
    volumes:
      - ./scripts/backup.sh:/backup.sh
      - ./backups:/backups
      - /var/run/docker.sock:/var/run/docker.sock
    command: >
      sh -c "
      chmod +x /backup.sh &&
      while true; do
        /backup.sh;
        sleep 86400; # 24 hours
      done
      "
    depends_on:
      - pdns-mysql
    networks:
      powerdns_net:
        ipv4_address: 172.28.0.15
    restart: unless-stopped

volumes:
  ${MYSQL_VOLUME}:

networks:
  powerdns_net:
    driver: bridge
    ipam:
      config:
        - subnet: ${PDNS_SUBNET}
```

---

## üìú 4. `scripts/backup.sh` ‚Äî ‡¶Ö‡¶ü‡ßã ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™ (Daily)

```bash
#!/bin/sh
# Auto backup MySQL database daily

CONTAINER=pdns-mysql
DB_NAME=pdns_prod
USER=pdns_admin
PASSWORD=StrongPdnsDBPass!2025  # Better: use docker secret or .env

DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_FILE="/backups/pdns_backup_${DATE}.sql"

echo "[$(date)] Starting backup..."

# Use docker exec to run mysqldump inside container
docker exec ${CONTAINER} sh -c "mysqldump -u ${USER} -p'${PASSWORD}' ${DB_NAME}" > ${BACKUP_FILE}

if [ $? -eq 0 ]; then
    echo "‚úÖ Backup successful: ${BACKUP_FILE}"
    # Keep last 7 days
    find /backups -name "pdns_backup_*.sql" -mtime +7 -delete
else
    echo "‚ùå Backup failed!"
    exit 1
fi
```

> ‚úÖ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶¶‡¶ø‡¶® ‡¶Ö‡¶ü‡ßã ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™ ‚Äî ‡¶™‡ßÅ‡¶∞‡¶®‡ßã 7 ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶¨‡ßá‡¶∂‡¶ø ‡¶∞‡¶æ‡¶ñ‡¶¨‡ßá ‡¶®‡¶æ‡•§

---

## ü©∫ 5. `scripts/healthcheck.sh` (Optional Advanced Healthcheck)

```bash
#!/bin/bash
# Advanced healthcheck for PowerDNS

API_URL="http://pdns:8081/api/v1/servers"
API_KEY="7x!K9#mQ2$pL8@nR5&vY4^wZ"

# Check API
curl -f -H "X-API-Key: $API_KEY" $API_URL > /dev/null 2>&1
API_OK=$?

# Check DNS resolution
echo "dig @127.0.0.1 localhost" | docker exec -i pdns sh > /dev/null 2>&1
DNS_OK=$?

if [ $API_OK -eq 0 ] && [ $DNS_OK -eq 0 ]; then
    exit 0
else
    exit 1
fi
```

> ‚öôÔ∏è ‡¶°‡¶ï‡¶æ‡¶∞ ‡¶ï‡¶Æ‡ßç‡¶™‡ßã‡¶ú‡ßá ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶á‡¶≤‡ßá ‚Äî `healthcheck.test` ‡¶è ‡¶è‡¶ü‡¶ø ‡¶Æ‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§

---

## üìä 6. `monitoring/prometheus.yml` ‚Äî ‡¶Æ‡ßá‡¶ü‡ßç‡¶∞‡¶ø‡¶ï‡ßç‡¶∏ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡ßá‡¶™‡¶ø‡¶Ç

```yaml
global:
  scrape_interval: 30s

scrape_configs:
  - job_name: 'powerdns'
    static_configs:
      - targets: ['pdns:8081']
    metrics_path: /metrics
    params:
      api-key: ['7x!K9#mQ2$pL8@nR5&vY4^wZ']
```

> ‚úÖ PowerDNS ‡¶è‡¶∞ ‡¶¨‡¶ø‡¶≤‡ßç‡¶ü-‡¶á‡¶® ‡¶Æ‡ßá‡¶ü‡ßç‡¶∞‡¶ø‡¶ï‡ßç‡¶∏ (Prometheus format) ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡ßá‡¶™ ‡¶ï‡¶∞‡¶¨‡ßá‡•§  
> Grafana ‡¶§‡ßá ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶° ‡¶¨‡¶æ‡¶®‡¶æ‡¶® ‚Äî QPS, Latency, Cache Hit Ratio ‡¶á‡¶§‡ßç‡¶Ø‡¶æ‡¶¶‡¶ø ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®!

---

## üß© 7. ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶∂‡¶® ‚Äî API ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶ú‡ßã‡¶®/‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü

### ‚û§ ‡¶®‡¶§‡ßÅ‡¶® ‡¶ú‡ßã‡¶® ‡¶§‡ßà‡¶∞‡¶ø (curl)

```bash
curl -X POST http://localhost:8081/api/v1/servers/localhost/zones \
  -H "X-API-Key: 7x!K9#mQ2$pL8@nR5&vY4^wZ" \
  -H "Content-Type: application/json" \
  --data '{
    "name": "prod.company.local",
    "kind": "Native",
    "nameservers": ["ns1.prod.company.local"]
  }'
```

### ‚û§ A ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶Ø‡ßã‡¶ó

```bash
curl -X PATCH http://localhost:8081/api/v1/servers/localhost/zones/prod.company.local \
  -H "X-API-Key: 7x!K9#mQ2$pL8@nR5&vY4^wZ" \
  -H "Content-Type: application/json" \
  --data '{
    "rrsets": [
      {
        "name": "web.prod.company.local",
        "type": "A",
        "ttl": 300,
        "changetype": "REPLACE",
        "records": [
          {
            "content": "192.168.100.10",
            "disabled": false
          }
        ]
      }
    ]
  }'
```

> ‚úÖ CI/CD Pipeline, Terraform, Ansible ‚Äî ‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶ü‡ßÅ‡¶≤ ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®!

---

## üîê 8. ‡¶∏‡¶ø‡¶ï‡¶ø‡¶â‡¶∞‡¶ø‡¶ü‡¶ø ‡¶¨‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ü‡¶ø‡¶∏ (Production)

| ‡¶¨‡¶ø‡¶∑‡¶Ø‡¶º | ‡¶á‡¶Æ‡¶™‡ßç‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∂‡¶® |
|-------|------------------|
| API Key Rotation | `.env` ‡¶è ‡¶∞‡¶æ‡¶ñ‡ßÅ‡¶® ‚Äî CI/CD ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶∞‡ßã‡¶ü‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® |
| Network Isolation | ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ ‡¶¨‡ßç‡¶∞‡¶ø‡¶ú ‡¶®‡ßá‡¶ü‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶ï ‚Äî ‡¶∂‡ßÅ‡¶ß‡ßÅ internal communication |
| Read-Only FS | MySQL/PowerDNS container ‚Äî read_only: true + tmpfs |
| Capability Drop | `cap_drop: ALL` + `cap_add: NET_BIND_SERVICE` |
| Health Check | ‡¶°‡¶ï‡¶æ‡¶∞ ‡¶π‡ßá‡¶≤‡¶•‡¶ö‡ßá‡¶ï ‚Äî ‡¶Ö‡¶ü‡ßã ‡¶∞‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞‡ßç‡¶ü ‡¶Ø‡¶¶‡¶ø ‡¶´‡ßá‡¶á‡¶≤ ‡¶ï‡¶∞‡ßá |
| Log Rotation | Volume mount + external log shipper (Filebeat/Fluentd) |
| Backup | ‡¶°‡ßá‡¶á‡¶≤‡¶ø ‡¶Ö‡¶ü‡ßã ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™ + ‡¶∞‡¶ø‡¶Æ‡ßã‡¶ü ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú (S3, MinIO) |

---

## üîÑ 9. CI/CD ‡¶á‡¶®‡ßç‡¶ü‡¶ø‡¶ó‡ßç‡¶∞‡ßá‡¶∂‡¶® (GitOps Example)

### `.github/workflows/deploy.yml`

```yaml
name: Deploy PowerDNS

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Deploy to Server
        uses: appleboy/ssh-action@v1
        with:
          host: ${{ secrets.HOST }}
          username: ${{ secrets.USER }}
          key: ${{ secrets.SSH_KEY }}
          script: |
            cd /opt/powerdns-prod
            docker-compose down
            git pull origin main
            docker-compose up -d --build
            echo "‚úÖ PowerDNS Deployed!"
```

> ‚úÖ ‡¶ó‡¶ø‡¶ü‡ßá ‡¶™‡ßÅ‡¶∂ ‡¶ï‡¶∞‡¶≤‡ßá‡¶á ‡¶Ö‡¶ü‡ßã ‡¶°‡ßá‡¶™‡ßç‡¶≤‡¶Ø‡¶º!

---

## üìà 10. ‡¶Æ‡¶®‡¶ø‡¶ü‡¶∞‡¶ø‡¶Ç + ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶≤‡¶æ‡¶∞‡ßç‡¶ü

- **Prometheus** ‚Üí Metrics ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡ßá‡¶™
- **Grafana** ‚Üí Dashboard (DNS QPS, Latency, Error Rate)
- **Alertmanager** ‚Üí ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶≤‡¶æ‡¶∞‡ßç‡¶ü (High Error Rate, Down Server)
- **Loki** ‚Üí ‡¶≤‡¶ó ‡¶è‡¶ó‡ßç‡¶∞‡¶ø‡¶ó‡ßá‡¶∂‡¶®
- **Blackbox Exporter** ‚Üí External DNS Query Test

---

## üß™ 11. ‡¶ü‡ßá‡¶∏‡ßç‡¶ü‡¶ø‡¶Ç ‚Äî Post-Deploy Smoke Test

```bash
#!/bin/bash
# smoke-test.sh

echo "Testing PowerDNS..."

# Test API
curl -f -H "X-API-Key: $(grep PDNS_API_KEY .env | cut -d'=' -f2)" \
  http://localhost:8081/api/v1/servers && echo "‚úÖ API OK" || exit 1

# Test DNS Resolution
nslookup localhost 127.0.0.1 && echo "‚úÖ DNS OK" || exit 1

echo "üéâ All tests passed!"
```

---

## üìå 12. ‡¶∏‡¶æ‡¶∞‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡ßá‡¶™ ‚Äî ‡¶™‡ßç‡¶∞‡¶´‡ßá‡¶∂‡¶®‡¶æ‡¶≤ ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™

| ‡¶´‡¶ø‡¶ö‡¶æ‡¶∞ | ‡¶á‡¶Æ‡¶™‡ßç‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∂‡¶® |
|--------|------------------|
| Config Management | `.env` + Docker Compose |
| Secrets | `.env` (Production ‡¶è Docker Secrets ‡¶¨‡¶æ Vault) |
| Automation | REST API + CI/CD |
| Monitoring | Prometheus + Grafana |
| Logging | Volume Mount + Loki/ELK |
| Backup | Daily mysqldump + Rotation |
| Security | Network Isolation, Cap Drop, Read-Only FS |
| Health Check | Built-in Docker Healthcheck |
| Scalability | Add replicas, Load Balancer (for Admin GUI) |
| GitOps | GitHub Actions / ArgoCD |

---

## üöÄ ‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶∏‡ßç‡¶ü‡ßá‡¶™ ‚Äî ‡¶Ü‡¶™‡¶®‡¶ø ‡¶ö‡¶æ‡¶á‡¶≤‡ßá:

1. **‚ÄúPowerDNS ‡¶ï‡ßá Kubernetes ‡¶è ‡¶°‡¶ø‡¶™‡ßç‡¶≤‡¶Ø‡¶º ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ó‡¶æ‡¶á‡¶°‚Äù**
2. **‚ÄúPowerDNS + Terraform ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá Infrastructure as Code‚Äù**
3. **‚ÄúPowerDNS API ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá Dynamic DNS (DDNS) ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™‚Äù**
4. **‚ÄúPowerDNS + Vault ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá Secret Management‚Äù**
5. **‚ÄúPowerDNS ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø Custom Grafana Dashboard‚Äù**

> üì£ ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶¨‡¶≤‡ßÅ‡¶® ‚Äî ‚Äú‡¶Ü‡¶Æ‡¶ø ‡¶ö‡¶æ‡¶á ________‚Äù ‚Äî ‡¶Ü‡¶Æ‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶≤‡ßá‡¶≠‡ßá‡¶≤‡ßá‡¶∞ ‡¶ó‡¶æ‡¶á‡¶° ‡¶≤‡¶ø‡¶ñ‡ßá ‡¶¶‡ßá‡¶¨‡•§

---

# üéÅ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏: ‡¶™‡ßç‡¶∞‡¶°‡¶æ‡¶ï‡¶∂‡¶® ‡¶°‡¶ø‡¶™‡ßç‡¶≤‡¶Ø‡¶º‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ö‡ßá‡¶ï‡¶≤‡¶ø‡¶∏‡ßç‡¶ü

‚úÖ `.env` ‡¶è‡¶∞ ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°/‡¶ï‡ßÄ ‡¶∞‡ßã‡¶ü‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá?  
‚úÖ ‡¶®‡ßá‡¶ü‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶ï ACL (`webserver_allow_from`) ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá?  
‚úÖ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü ‡¶ü‡ßá‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá?  
‚úÖ ‡¶Æ‡¶®‡¶ø‡¶ü‡¶∞‡¶ø‡¶Ç (Prometheus/Grafana) ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶õ‡ßá?  
‚úÖ Health Check ‡¶™‡¶æ‡¶∏ ‡¶ï‡¶∞‡¶õ‡ßá?  
‚úÖ Log Rotation ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá?  
‚úÖ CI/CD ‡¶™‡¶æ‡¶á‡¶™‡¶≤‡¶æ‡¶á‡¶® ‡¶ü‡ßá‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá?

---

‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶! üòä  
‡¶è‡¶á ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™ ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶Ü‡¶™‡¶®‡¶ø **‡¶è‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶ú ‡¶≤‡ßá‡¶≠‡ßá‡¶≤‡ßá‡¶∞ DNS ‡¶á‡¶®‡¶´‡ßç‡¶∞‡¶æ** ‡¶∞‡¶æ‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶® ‚Äî ‡¶∏‡ßç‡¶ï‡ßá‡¶≤‡ßá‡¶¨‡¶≤, ‡¶∏‡¶ø‡¶ï‡¶ø‡¶â‡¶∞, ‡¶Ö‡¶¨‡¶ú‡¶æ‡¶∞‡¶≠‡ßá‡¶¨‡¶≤, ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü‡ßá‡¶°‡•§

Happy PowerDNS-ing! üåê  
‡¶Ü‡¶∞ ‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‚Äî ‡¶ú‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶∏‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®, ‡¶Ü‡¶Æ‡¶ø ‡¶Ü‡¶õ‡¶ø‡•§
